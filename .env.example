# Server configuration
HOST=0.0.0.0
PORT=3021

# API authentication key for preloading images
API_KEY=your-secret-api-key-here

# Base file API URL for proxying images (optional)
# If set, images not in cache will be fetched from this URL
BASE_FILE_API_URL=http://your-backend-api.com/api/files
BASE_FILE_API_URL_TIMEOUT=30

# Storage implementation: InMemory or Persistent
STORAGE_IMPLEMENTATION=InMemory

# Processing cache implementation: InMemory or Persistent
PROCESSING_CACHE_IMPLEMENTATION=InMemory

# Cache size settings
# Number of original images cached in memory
STORAGE_CACHE_SIZE=256

# Number of processed images (after resize, crop, etc.) stored in memory
PROCESSING_CACHE_SIZE=1024

# Persistent storage directory (used when Persistent implementation is selected)
# This directory will be created inside the container at /app/data
PERSISTENT_STORAGE_DIR=/app/data

# Client cache (in browser) duration (in seconds) for served images
CLIENT_CACHE_TTL=31536000

# Max image resulting size after resize (width,height)
MAX_IMAGE_RESIZE=1920,1080


# Default resulting extension
DEFAULT_EXTENSION=Webp
# Allow custom extensions (if false, only DEFAULT_EXTENSION will be returned)
ALLOW_CUSTOM_EXTENSION=true

# Restrict max options (size, extensions and etc) per image
# This option prevents poisoning processing cache with insufficient options
MAX_OPTIONS_PER_IMAGE=32
# Behaviour on exceeding limit of MAX_OPTIONS_PER_IMAGE.
# by default it will be rewrite it as LRU cache.
# Options: "Restrict" (raise 400 err on attempting) or "Rewrite" (always rewrite last option)
MAX_OPTIONS_PER_IMAGE_OVERFLOW_POLICY=Rewrite
